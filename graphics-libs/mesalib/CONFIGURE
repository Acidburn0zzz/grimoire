. $GRIMOIRE/config_query_multi.function                                  &&
if [[ "${SMGL_COMPAT_ARCHS[1]}" == "sparc" ]]
then
config_query_list MESALIB_BUILD                                          \
                  "Select build type(use dri type for 3D acceleration?"  \
                  linux-sparc                                            \
                  linux-sparc5                                           \
                  linux-ultrasparc                                       \
                  linux-directfb                                         \
                  linux-fbdev                                            \
                  linux-glide
elif [[ "${SMGL_COMPAT_ARCHS[1]}" == "ppc" ]]
then
config_query_list MESALIB_BUILD                                          \
                  "Select build type(use dri type for 3D acceleration?"  \
                  linux-ppc                                              \
                  linux-dri-ppc                                          \
                  linux-dri                                              \
                  linux-directfb                                         \
                  linux-fbdev                                            \
                  linux-glide
elif [[ "${SMGL_COMPAT_ARCHS[1]}" == "x86_64" ]]
then
config_query_list MESALIB_BUILD                                          \
                  "Select build type(use dri type for 3D acceleration?"  \
                  linux-x86-64                                           \
                  linux-dri-x86-64                                       \
                  linux-dri                                              \
                  linux-directfb                                         \
                  linux-fbdev                                            \
                  linux-glide
elif [[ "${SMGL_COMPAT_ARCHS[1]}" == "ia32" ]]
then
config_query_list MESALIB_BUILD                                          \
                  "Select build type(use dri type for 3D acceleration?"  \
                  linux-x86                                              \
                  linux-dri-x86                                          \
                  linux-dri                                              \
                  linux-directfb                                         \
                  linux-fbdev                                            \
                  linux-glide
else
config_query_list MESALIB_BUILD                                          \
                  "Select build type(use dri type for 3D acceleration?"  \
                  linux                                                  \
                  linux-dri
fi                                                                       &&
if grep -q dri <<< "$MESALIB_BUILD"
then
config_query_multi MESALIB_DRIVERS                                       \
                   "What drivers would you like to build?"               \
                   all                                                   \
                   i810                                                  \
                   i915                                                  \
                   mach64                                                \
                   mga                                                   \
                   r128                                                  \
                   r200                                                  \
                   r300                                                  \
                   radeon                                                \
                   s3v                                                   \
                   savage                                                \
                   sis                                                   \
                   tdfx                                                  \
                   trident                                               \
                   unichrome                                             \
                   ffb                                                   &&
  if list_find "$MESALIB_DRIVERS" all
  then
  MESALIB_DRIVERS="i810 i915 mach64 mga r128 r200 r300 radeon s3v savage sis tdfx trident unichrome ffb"
  fi
fi
