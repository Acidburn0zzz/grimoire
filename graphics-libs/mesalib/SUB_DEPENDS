case $THIS_SUB_DEPENDS in
  DRI)
    MESALIB_BUILD=dri              &&
    persistent_add  MESALIB_BUILD  &&

    message "${MESSAGE_COLOR}DRI support requested, forcing build type"  \
            "$MESALIB_BUILD for architecture\n${SMGL_COMPAT_ARCHS[1]}."  \
            "$DEFAULT_COLOR"                                             &&
    list_remove  MESALIB_DRIVERS  nouveau  || true
    list_remove  MESALIB_DRIVERS  i915tex  || true

    . $GRIMOIRE/config_query_multi.function                              &&
   if [[ $MESALIB_BUILD == dri ]]; then
   config_query_multi MESALIB_DRIVERS                                    \
                      "What drivers would you like to build?"            \
                      swrast                                             \
                      all                                                \
                      i810                                               \
                      i915                                               \
                      i965                                               \
                      mach64                                             \
                      mga                                                \
                      r128                                               \
                      r200                                               \
                      r300                                               \
                      r600                                               \
                      radeon                                             \
                      s3v                                                \
                      savage                                             \
                      sis                                                \
                      tdfx                                               \
                      trident                                            \
                      unichrome                                          \
                      ffb                                                &&
     if list_find "$MESALIB_DRIVERS" all
     then
     MESALIB_DRIVERS="i810 i915 i965 mach64 mga r128 r200 r300 r600 radeon s3v savage sis tdfx trident unichrome ffb swrast"
     fi
   fi                                                                    ;;

  *) echo "Unknown sub_depends!"; return 1 ;;
esac
