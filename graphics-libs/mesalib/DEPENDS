. "$GRIMOIRE/FUNCTIONS" &&

depends dri2proto &&
depends libdrm &&
depends util-macros &&
depends lndir &&
depends xorg-cf-files &&
depends makedepend &&
depends expat &&
depends libxdamage &&
depends libx11 &&
depends libxext &&
depends libxxf86vm &&
depends libxau &&
depends libxfixes &&
depends glproto &&
depends talloc &&
depends libxml2 &&
sub_depends libxml2 PYTHON &&

if list_find "--enable-glw" $MESALIB_OPTS; then
  depends libxt
fi &&

optional_depends libxcb \
                 '--enable-xcb' \
                 '--disable-xcb' \
                 'Enable XCB support?'

if is_depends_enabled $SPELL libxcb;then
  sub_depends libx11 XCB
fi &&

if spell_ok libdrm && is_version_less $(installed_version libdrm) 2.4.3; then
  force_depends libdrm
fi &&

if ( list_find "i915" $MESALIB_DRIVERS ) || \
   ( list_find "i965" $MESALIB_DRIVERS ); then
  sub_depends libdrm INTEL
fi &&

if ( list_find "r200" $MESALIB_DRIVERS ) || \
   ( list_find "radeon" $MESALIB_DRIVERS ); then
  sub_depends libdrm RADEON
fi &&

if [[ $MESALIB_BRANCH == "scm" ]]; then
  depends  git
fi &&

if [[ "$MESALIB_BRANCH" == "development" && "$MESALIB_GALLIUM" != "none" ]]; then
  depends llvm
fi &&
optional_depends udev '' '' 'hardware detection'

