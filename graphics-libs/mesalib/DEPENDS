. "$GRIMOIRE/FUNCTIONS" &&

depends smgl-gl_select &&
depends -sub 'CXX' gcc &&
depends bison &&
depends flex  &&
depends gettext   &&
depends dri2proto &&
depends libdrm &&
depends util-macros &&
depends gccmakedep &&
depends lndir &&
depends xorg-cf-files &&
depends makedepend &&
depends expat &&
depends libxdamage &&
depends libx11 &&

case $MESALIB_BUILD in
 dri)
  depends glproto &&
  depends dri2proto &&
  depends dri3proto &&
  depends presentproto &&
  depends libdrm &&
  depends DEVICE-MANAGER   &&
  depends libxext &&
  depends libxxf86vm &&
  depends libxdamage &&
  depends libxfixes &&
  depends libxcb &&
  depends expat
  ;;
 *)
  ;;
esac &&

depends mako    &&
depends python  &&

if [[ "$MESALIB_GALLIUM" != "none" ]]; then
  depends llvm
  if list_find  "$MESA_EGL" wayland;then
    depends wayland
  fi &&
  if list_find   "$MESALIB_GALLIUM" radeonsi;then
    depends libelf
  fi
fi &&

if ( list_find  "$MESALIB_DRIVERS"  i915 ) || \
   ( list_find  "$MESALIB_DRIVERS" i965); then
  sub_depends libdrm INTEL
fi &&

if ( list_find  "$MESALIB_DRIVERS" r200) || \
   ( list_find  "$MESALIB_DRIVERS" radeon); then
  sub_depends libdrm RADEON
fi &&

if ( list_find "$MESALIB_DRIVERS" nouveau); then
  sub_depends libdrm NOUVEAU
fi &&

if list_find  "$MESA_EGL" wayland;then
  depends wayland
fi &&
optional_depends libva    '' '' 'video acceleration support' &&
optional_depends libvdpau '' '' 'VDPAU support' &&
optional_depends libxvmc  '--enable-xvmc' '--disable-xvmc' 'XvMC support (obsolete)'
