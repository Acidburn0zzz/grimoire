--- Makefile.am	2012/01/14 08:18:00	1.20.2.1
+++ Makefile.am	2012/05/08 20:28:19	1.20.2.2
@@ -1,5 +1,5 @@
 ## Process this file with automake to produce Makefile.in -*-Makefile-*-
-AUTOMAKE_OPTIONS = foreign 1.2h
+AUTOMAKE_OPTIONS = foreign
 
 SUBDIRS = config m4 term src docs $(LISPDIR) man demo tutorial share

--- src/Makefile.am	2012/01/19 07:03:27	1.86.2.3
+++ src/Makefile.am	2012/05/08 20:28:20	1.86.2.4
@@ -1,5 +1,5 @@
 ## Process this file with automake to produce Makefile.in -*-Makefile-*-
-AUTOMAKE_OPTIONS = ansi2knr foreign 1.2h
+AUTOMAKE_OPTIONS = foreign
 
 # in the spirit of automake ...
 pkglibexecdir = $(libexecdir)/@PACKAGE@/@VERSION_MAJOR@
--- configure.in	2012/04/26 22:53:11	1.297.2.14
+++ configure.in	2012/05/08 20:28:19	1.297.2.15
@@ -20,11 +20,12 @@
 dnl configure.in body
 
 dnl Compiler characteristics
-dnl Check for ANSI C prototypes, the const and inline keywords,
-dnl and ANSI style stringification
+dnl Check for the const and inline keywords and ANSI style stringification
+dnl automake 1.12 dropped support for AM_C_PROTOTYPES and ansi2knr
+dnl But our code still tests for #ifdef PROTOTYPES, so define it here
+AC_DEFINE(PROTOTYPES,1,[Automake 1.12 dropped support for building without prototypes])
 AC_GNU_SOURCE
 AC_PROG_CC
-AM_C_PROTOTYPES
 AC_PROG_CPP
 AC_C_CONST
 AC_C_INLINE
