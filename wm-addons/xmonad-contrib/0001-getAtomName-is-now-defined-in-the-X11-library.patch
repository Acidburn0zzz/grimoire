From edd8e17babfd93dd92557d09150cac8eb30f3f3f Mon Sep 17 00:00:00 2001
From: Florian Franzmann <siflfran@hawo.stw.uni-erlangen.de>
Date: Sun, 3 Mar 2013 20:13:36 +0100
Subject: [PATCH] getAtomName is now defined in the X11 library

---
 XMonad/Hooks/DebugEvents.hs | 14 --------------
 xmonad-contrib.cabal        |  2 +-
 2 files changed, 1 insertion(+), 15 deletions(-)

diff --git a/XMonad/Hooks/DebugEvents.hs b/XMonad/Hooks/DebugEvents.hs
index 6256444..2301425 100644
--- a/XMonad/Hooks/DebugEvents.hs
+++ b/XMonad/Hooks/DebugEvents.hs
@@ -49,20 +49,6 @@ import           System.Exit
 import           System.IO
 import           System.Process
 
--- this should move into X11
-foreign import ccall unsafe "XGetAtomName"
-  xGetAtomName :: Display -> Atom -> IO CString
-
-getAtomName     :: Display -> Atom -> IO (Maybe String)
-getAtomName d a =  do
-  n <- xGetAtomName d a
-  if n == nullPtr
-    then return Nothing
-    else do
-      n' <- peekCString n
-      xFree n
-      return $ Just n'
-
 -- | Event hook to dump all received events.  You should probably not use this
 --   unconditionally; it will produce massive amounts of output.
 debugEventsHook   :: Event -> X All
diff --git a/xmonad-contrib.cabal b/xmonad-contrib.cabal
index a83bac6..4b1d369 100644
--- a/xmonad-contrib.cabal
+++ b/xmonad-contrib.cabal
@@ -72,7 +72,7 @@ library
         extensions: ForeignFunctionInterface
         cpp-options: -DXFT
 
-    build-depends:      mtl >= 1 && < 3, unix, X11>=1.6 && < 1.7, xmonad>=0.11   && < 0.12, utf8-string
+    build-depends:      mtl >= 1 && < 3, unix, X11>=1.6.1 && < 1.7, xmonad>=0.11   && < 0.12, utf8-string
 
     if true
         ghc-options:    -fwarn-tabs -Wall
-- 
1.8.1.3

