optional_depends MAIL-TRANSPORT-AGENT \
                 '' \
                 '' \
                 'Enable delivery agent support' &&

optional_depends db \
                 '' \
                 '' \
                 'Enable DB storage driver' &&

optional_depends sqlite \
                 '' \
                 '' \
                 'Enable SQLite storage driver' &&

optional_depends MYSQL \
                 '--with-mysql-includes=/usr/include/mysql' \
                 '' \
                 'Enable MYSQL storage driver' &&

optional_depends postgresql \
                 '--with-pgsql-includes=/usr/include/postgresql' \
                 '' \
                 'Enable PostgreSQL storage driver' &&

if is_depends_enabled $SPELL postgresql ||
  is_depends_enabled $SPELL $(get_spell_provider $SPELL MYSQL); then
  config_query_option DSPAM_OPTS "Enable virtual users?" n \
                                 "--enable-virtual-users" \
                                 "--disable-virtual-users"
fi &&

if [[ "$DSPAM_GD"  == y ]]; then
  depends gd            &&
  sub_depends gd libpng &&
  depends gd-graph      &&
  depends gd-graph3d    &&
  depends gd-text       &&
  depends perl-cgi; 
fi                      &&

optional_depends openldap \
                 '--enable-external-lookup' \
                 '--disable-external-lookup' \
                 'for LDAP support' &&

optional_depends clamav \
                 '--enable-clamav' \
                 '--disable-clamav' \
                 'for virus detection' &&

optional_depends SYSTEM-LOGGER \
                 '--enable-syslog' \
                 '--disable-syslog' \
                 'for logging through syslog' &&

optional_depends procmail '' '' 'for the default TrustedDeliveryAgent'
optional_depends WEBSERVER '' '' 'for the web interface'
