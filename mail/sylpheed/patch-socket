--- libsylph/socket.c.orig	2008-02-15 09:32:49.000000000 +0100
+++ libsylph/socket.c	2008-08-28 19:01:35.000000000 +0200
@@ -383,9 +383,9 @@
 	sock = sock_find_from_fd(fd);
 	if (sock) {
 		if (nonblock) {
-			SOCK_SET_FLAGS(sock->flags, SOCK_NONBLOCK);
+			SOCK_SET_FLAGS(sock->flags, LIBSYLPH_SOCK_NONBLOCK);
 		} else {
-			SOCK_UNSET_FLAGS(sock->flags, SOCK_NONBLOCK);
+			SOCK_UNSET_FLAGS(sock->flags, LIBSYLPH_SOCK_NONBLOCK);
 		}
 	}
 	debug_print("set nonblocking mode to %d\n", nonblock);
@@ -418,9 +418,9 @@
 	ret = set_nonblocking_mode(sock->sock, nonblock);
 	if (ret == 0) {
 		if (nonblock) {
-			SOCK_SET_FLAGS(sock->flags, SOCK_NONBLOCK);
+			SOCK_SET_FLAGS(sock->flags, LIBSYLPH_SOCK_NONBLOCK);
 		} else {
-			SOCK_UNSET_FLAGS(sock->flags, SOCK_NONBLOCK);
+			SOCK_UNSET_FLAGS(sock->flags, LIBSYLPH_SOCK_NONBLOCK);
 		}
 	}
 
@@ -950,7 +950,7 @@
 	sockinfo->hostname = g_strdup(conn_data->hostname);
 	sockinfo->port = conn_data->port;
 	sockinfo->state = CONN_ESTABLISHED;
-	sockinfo->flags = SOCK_NONBLOCK;
+	sockinfo->flags = LIBSYLPH_SOCK_NONBLOCK;
 
 	sock_list = g_list_prepend(sock_list, sockinfo);
 
--- libsylph/socket.h.orig	2007-06-11 10:06:45.000000000 +0200
+++ libsylph/socket.h	2008-08-28 19:01:34.000000000 +0200
@@ -46,13 +46,13 @@
 
 typedef enum
 {
-	SOCK_NONBLOCK	= 1 << 0,
+	LIBSYLPH_SOCK_NONBLOCK	= 1 << 0,
 	SOCK_CHECK_IO	= 1 << 1
 } SockFlags;
 
 #define SOCK_SET_FLAGS(flags, set)	{ (flags) |= (set); }
 #define SOCK_UNSET_FLAGS(flags, set)	{ (flags) &= ~(set); }
-#define SOCK_IS_NONBLOCK(flags)		((flags & SOCK_NONBLOCK) != 0)
+#define SOCK_IS_NONBLOCK(flags)		((flags & LIBSYLPH_SOCK_NONBLOCK) != 0)
 #define SOCK_IS_CHECK_IO(flags)		((flags & SOCK_CHECK_IO) != 0)
 
 typedef gint (*SockConnectFunc)		(SockInfo	*sock,
