if [ -f /etc/sorcery/local/depends/guile.p ]
then
	. /etc/sorcery/local/depends/guile.p
fi                                           

if [ "$G_18" = "y" ]
then
	message "\n${MESSAGE_COLOR}" \
	  "${SPELL} isn't released for guile 1.8, so it may not works\n\n" 

	if ! query "Would you like to continue?" n;
	then
		message "${MESSAGE_COLOR}Please recast later!\n"
		return 1
	fi
fi

config_query  MIDI    "include sndlib midi module?"  n
config_query  HOBBIT  "include arity check support for hobbit?"  n
config_query  RUBY    "use ruby as scripting language (instead of Guile)?"  y
config_query  GUI     "configure snd with a GUI?"  y

persistent_add  MIDI_OPTS  HOBBIT_OPTS  GUI_OPTS  &&

if  [  "$GUI"  ==  "y"  ]
then
  GUI_OPTS="--with-x"
  config_query  GTK     "use the GTK interface (instead of Motif)?"  y
else
  persistent_add  GTK      &&
  GUI_OPTS="--with-no-gui" &&
  GTK="n"
fi  &&

if  [  "$MIDI"  ==  "y"  ]
then
  #OPTS="$OPTS --with-midi"
  MIDI_OPTS="--with-midi"
else
  MIDI_OPTS="--without-midi"
fi  &&

if  [  "$HOBBIT"  ==  "y"  ]
then
  #OPTS="$OPTS  --with-hobbit"
  HOBBIT_OPTS="--with-hobbit"
else
  HOBBIT_OPTS="--without-hobbit"
fi
