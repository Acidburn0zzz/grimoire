depends  simpleinit-msb  &&
if [ "$DEVICES" == "devfs" ]; then
  optional_depends  devfsd  ""  ""  \
      "to make devfs more functional and compatible with the old static /dev"
elif [ "$DEVICES" == "udev" ]; then
  KERNEL_VERSION=$(get_kernel_version)  &&
  PATCHLEVEL=`echo $KERNEL_VERSION | cut -d. -f2`  &&
  SUBLEVEL=`echo $KERNEL_VERSION | cut -d. -f3`  &&
  tmp=`echo $KERNEL_VERSION | cut -d. -f3 | sed 's/^[0-9]*//g'`  &&
  SUBLEVEL=${SUBLEVEL/$tmp/}  &&

  # kernel < 2.6.15-rc1 can't use udev > 0.93 tarballs because udevsend has been removed
  if [ $SUBLEVEL -ge 15 -a $PATCHLEVEL -ge 6 ]; then
    depends udev
  else
    message  "You have a kernel < 2.6.15, it is too old for latest udev."  &&
    message  "We will use udev-old spell instead..."  &&
    depends udev-old
  fi
fi
