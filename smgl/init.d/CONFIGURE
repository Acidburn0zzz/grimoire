.  $GRIMOIRE/FUNCTIONS

local  DEVICES_LIST  &&

if  [[ $(get_sorcery_kernel_config CONFIG_NET) == y  &&
       $(get_sorcery_kernel_config CONFIG_UNIX) == y  &&
       $(get_sorcery_kernel_config CONFIG_HOTPLUG) == y ]]; then
  DEVICES_LIST="udev static"
else
  DEVICES_LIST="static"
fi  &&

if  grep -q devfs /proc/filesystems  &&
    [[ -e /dev/.devfsd ]]; then
  DEVICES_LIST="$DEVICES_LIST devfs"  &&
  message "\n${MESSAGE_COLOR}NOTICE: Switching from devfs to udev or static currently needs manual editing of /etc/fstab.${DEFAULT_COLOR}\n"
fi  &&

config_query_list  DEVICES  "Choose /dev management mode:"  $DEVICES_LIST &&
if [[ "$DEVICES" != "devfs" ]]
then
  config_query  CREATE_DEV_TREE  "check for/create static /dev tree" y
fi
