mk_source_dir "${SOURCE_DIRECTORY}" &&
cd "${SOURCE_DIRECTORY}" &&
verify_file &&

7z x "${SOURCE_CACHE}/${SOURCE}" > /dev/null &&

# resurrect permissions not stored by 7zip
find . -type d -exec chmod 755 '{}' \; &&
find . -type f -exec chmod 644 '{}' \; &&
find . -name '*.sh' -exec chmod +x {} \; &&
chmod -R +x build/autoconf/* python/* &&

if is_depends_enabled $SPELL cairo; then
  patch -p0 < "${SPELL_DIRECTORY}/cairo-system.patch"
fi
