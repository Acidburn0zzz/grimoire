default_pre_build                     &&
if list_find "$GCC_COMPILER" "c++" ; then
cd $BUILD_DIRECTORY                   &&
unpack_file 3
fi
if list_find "$GCC_COMPILER" "objc" ; then
cd $BUILD_DIRECTORY                   &&
unpack_file 5
fi
if list_find "$GCC_COMPILER" "ada" ; then
cd $BUILD_DIRECTORY                   &&
unpack_file 7
cd  $SOURCE_DIRECTORY                 &&

mkdir ${SOURCE13/.tar.bz2}            &&
cd  ${SOURCE13/.tar.bz2}              &&
unpack_file 13                         &&
mk_source_dir  $SOURCE_DIRECTORY.bld  &&

#
# This section is used to build a gnat bootstrap cache
#
touch  $SOURCE_DIRECTORY/gcc/cstamp-h.in       &&
touch  $SOURCE_DIRECTORY/gcc/ada/[es]info.h    &&
touch  $SOURCE_DIRECTORY/gcc/ada/nmake.ad[bs]  &&


sedit 's:(Last3 = "gnatgcc"):(Last3 = "gcc"):'    \
       $SOURCE_DIRECTORY/gcc/ada/makegpr.adb      &&
sedit 's:and Nam is "gnatgcc":and Nam is "gcc":'  \
       $SOURCE_DIRECTORY/gcc/ada/osint.ads
#
# End Ada bootstrap cache code
#
fi
if list_find "$GCC_COMPILER" "java" ; then
cd $BUILD_DIRECTORY                   &&
unpack_file 9                         &&
verify_file 14 &&

cp -v $SOURCE_CACHE/$SOURCE14 $SOURCE_DIRECTORY/ecj.jar
fi
if list_find "$GCC_COMPILER" "fortran" ; then
cd $BUILD_DIRECTORY                   &&
unpack_file 11
fi

mk_source_dir  $SOURCE_DIRECTORY.bld  &&
cd  $SOURCE_DIRECTORY                 &&

#apply the GCC 4.1.1 fast-math fix
#patch -p1 < $SPELL_DIRECTORY/gcc-$VERSION-ffast-math.patch
patch -p1 < $SPELL_DIRECTORY/gcc-4.3.0-ffast-math.patch



