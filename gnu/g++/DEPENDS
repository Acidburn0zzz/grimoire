. $GRIMOIRE/libcompat    &&

depends  gcc             &&
depends  gmp             &&
depends  gnupg           &&
depends  mpfr            &&
depends  smgl-archspecs  &&

if spell_ok gcc; then
  persistent_read gcc GCC_BUILD_ARCH GCC_BUILD_ARCH || true
fi  &&

if [[ $VERSION != $(installed_version gcc)
   || $GCC_BUILD_ARCH  != ${SMGL_COMPAT_ARCHS[4]} ]]; then
  force_depends  gcc
fi  &&

if spell_ok gmp; then
  persistent_read gmp GMP_BUILD_ARCH GMP_BUILD_ARCH || true
fi  &&
if spell_ok mpfr; then
  persistent_read mpfr MPFR_BUILD_ARCH MPFR_BUILD_ARCH || true
fi  &&

if [[ $GMP_BUILD_ARCH  != ${SMGL_COMPAT_ARCHS[4]}
   || $MPFR_BUILD_ARCH != ${SMGL_COMPAT_ARCHS[4]} ]]; then
  force_depends gmp &&
  force_depends mpfr
fi
