config_query_option BITLBEE_OPTS "Enable plugin support? " y \
                     "--plugins=1" "--plugins=0" &&

config_query_option BITLBEE_OPTS "Enable Jabber (XMPP) protocol? " n \
                    "--jabber=1" "--jabber=0" &&

config_query_option BITLBEE_OPTS "Enable Oscar protocol (for ICQ or AIM)? " y \
                    "--oscar=1" "--oscar=0" &&

config_query_option BITLBEE_OPTS "Enable Yahoo protocol? " y \
                     "--yahoo=1" "--yahoo=0" &&

config_query_option BITLBEE_OPTS "Enable Twitter protocol? " y \
                     "--twitter=1" "--twitter=0" &&

config_query_option BITLBEE_OPTS "Enable MSN protocol? " y \
                     "--msn=1" "--msn=0" &&

config_query BITLBEE_OTR "Enable off-the-record (OTR) encryption support?" y &&

if [[ "$BITLBEE_OTR" == "y" ]]
then
  if [[ "$BITLBEE_OPTS" == *--plugins=1* ]]
  then
    config_query BITLBEE_OTRPLUGIN "Build OTR support as a plugin?" n &&
    [[ "$BITLBEE_OTRPLUGIN" == "y" ]] && BITLBEE_OPTS="$BITLBEE_OPTS --otr=plugin"
  else
    BITLBEE_OPTS="$BITLBEE_OPTS --otr=1"
  fi
fi &&

config_query_list BITLBEE_SSL "Which SSL library would you like to use?" \
		   "openssl" \
		   "gnutls" &&

config_query_list BITLBEE_EVENT "Which event library would you like to use?" \
		   "glib2" \
		   "libevent" &&

config_query BITLBEE_BITLBEED \
             "Build bitlbeed (to run bitlbee without xinetd)?" n
