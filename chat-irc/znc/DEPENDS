depends g++ &&

message "NOTE: ZNC needs swig enabled for modperl/modpython support" &&

optional_depends perl \
                 "--enable-perl" \
                 "--disable-perl" \
                 "to use perl" &&

if is_depends_enabled $SPELL perl; then
  depends -sub PERL swig '--enable-swig'
fi &&

optional_depends python \
                 "--enable-python=python-config" \
                 "--disable-python" \
                 "to use Python" &&

if is_depends_enabled $SPELL python; then
  depends -sub PYTHON swig '--enable-swig'
fi &&

optional_depends tcl \
                 "--enable-tcl" \
                 "--disable-tcl" \
                 "to use TCL" &&

if is_depends_enabled $SPELL tcl && list_find "--disable-extra" "$ZNC_OPTS"; then
  message "Requested TCL support, forcing build of extra modules" &&
  ZNC_OPTS="--enable-extra $ZNC_OPTS"
fi &&

optional_depends cyrus-sasl \
                 "--enable-sasl" \
                 "--disable-sasl" \
                 "for SASL support" &&

optional_depends c-ares \
                 "--enable-c-ares" \
                 "--disable-c-ares" \
                 "for c-ares usage" &&

optional_depends openssl \
                 "--enable-openssl" \
                 "--disable-openssl" \
                 "to use OpenSSL"
