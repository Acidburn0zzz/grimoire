source $GRIMOIRE/FUNCTIONS                &&
source  $SECTION_DIRECTORY/KDE_CONFIGURE  &&

local CFG=$SPELL_CONFIG

get_kdelanguages()  {
  local  i  LANGUAGE  LANGUAGES  &&
    rm  -f  $CFG                                                   &&
    touch  $CFG                                                    &&

config_query_multi KDE_LANG "please specify the required languages" \
   af ar as ast be be@latin \
   bg bn_IN br ca ca@valencia crh cs csb cy da de el en_GB es eo et eu \
   fa fi fr fy ga gl gu ha he hi hne hr hsb hu hy id is it \
   ja ka kk km kn  ko ku \
   lb lt lv mai mk ml mr ms mt nb nds ne nl nn nso oc or \
   pa pl ps pt pt_BR ro ru rw se si sk sl sr sr@latin sv \
   ta te tg th tr uk uz uz@cyrillic vi\
   wa xh zh_CN zh_HK zh_TW  &&

# should perhaps use SOURCE_IGNORE=unversioned instead of MD5[0]="IGNORE" 
      local i=1                               &&
      for  LANGUAGE  in  $KDE_LANG
      do
        if  [[  $i  ==  1  ]]
        then
          echo  SOURCE=$SPELLX-$LANGUAGE-\$VERSION.tar.bz2  >>  $CFG  &&
          echo  SOURCE_URL[0]=\$SITE/\$SOURCE              >>  $CFG
        else
          echo  SOURCE$i=$SPELLX-$LANGUAGE-\$VERSION.tar.bz2  >>  $CFG  &&
          echo  SOURCE${i}_URL[0]=\$SITE/\$SOURCE$i            >>  $CFG
        fi  &&
        echo  MD5[$[$i-1]]="IGNORE"  >>  $CFG  &&
        i=$[$i+1]
      done
}

if  [[ -z $KDE_LANG ]]  || query "Reconfigure?"  n
then
  get_kdelanguages
else
  message  "${MESSAGE_COLOR}Using existing config${DEFAULT_COLOR}"
fi &&

.  $CFG
