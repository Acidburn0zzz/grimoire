--- libgda/sqlite/mkkeywordhash.c.orig
+++ libgda/sqlite/mkkeywordhash.c
@@ -370,6 +370,10 @@ main (int argc, char **argv)
 	}
 
 	/* Begin generating code */
+	printf("#include <stdio.h>\n");
+	printf("#include <string.h>\n");
+	printf("#include <glib.h>\n");
+
 	printf("/* Hash score: %d */\n", bestCount);
 	printf("static int %skeywordCode(const char *z, int n){\n", prefix ? prefix : "");
 	printf("  /* zText[] encodes %d bytes of keywords in %d bytes */\n",
--- libgda/sqlite/Makefile.am.orig
+++ libgda/sqlite/Makefile.am
@@ -58,9 +58,9 @@ sqlitesources = \
 	gda-sqlite.h \
 	keywords_hash.h \
 	gda-symbols-util.h \
-	gda-symbols-util.c
-
-$(libgda_sqlite_la_OBJECTS): xml_embedded.h keywords_hash.c
+	gda-symbols-util.c \
+	xml_embedded.h \
+	keywords_hash.c
 
 libgda_sqlite_la_SOURCES = $(sqlitesources)
 libgda_sqlite_la_CFLAGS = -DPNAME=\""SQLite"\" -DCLASS_PREFIX=\""GdaSqlite"\" -DSEARCH_LIB_PATH=\""$(SQLITE_PATH)"\"
@@ -85,4 +85,5 @@ gdainclude_HEADERS=$(sqliteheaders)
 
 EXTRA_DIST = gen_emb_string.c mkkeywordhash.c keywords.list
 
-CLEANFILES = gen_emb_string$(EXEEXT_FOR_BUILD) xml_embedded.h mkkeywordhash$(EXEEXT_FOR_BUILD) keywords_hash.c
+CLEANFILES = gen_emb_string$(EXEEXT_FOR_BUILD) mkkeywordhash$(EXEEXT_FOR_BUILD) $(BUILT_SOURCES)
+BUILT_SOURCES = xml_embedded.h keywords_hash.c
