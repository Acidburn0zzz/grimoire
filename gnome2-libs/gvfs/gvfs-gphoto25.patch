diff -ur gvfs-1.12.3/configure.ac gvfs-mod/configure.ac
--- gvfs-1.12.3/configure.ac	2012-05-15 13:04:27.000000000 -0500
+++ gvfs-mod/configure.ac	2012-09-08 19:15:26.998713492 -0500
@@ -397,6 +397,9 @@
     if test "x$use_gphoto2" = "xyes"; then
       PKG_CHECK_MODULES(GPHOTO2, libgphoto2 >= 2.4.0)
       AC_DEFINE(HAVE_GPHOTO2, 1, [Define to 1 if gphoto2 is available])
+       PKG_CHECK_MODULES(GPHOTO2, libgphoto2 >= 2.5.0,
+       AC_DEFINE(HAVE_GPHOTO25, 1, [Define to 1 if libgphoto2 2.5 is available])
+       )
     else
       AC_MSG_WARN([Not building with gphoto2 support. Need OS tweaks in hal volume monitor.])
       msg_gphoto2=no
diff -ur gvfs-1.12.3/daemon/gvfsbackendgphoto2.c gvfs-mod/daemon/gvfsbackendgphoto2.c
--- gvfs-1.12.3/daemon/gvfsbackendgphoto2.c	2012-05-15 13:01:50.000000000 -0500
+++ gvfs-mod/daemon/gvfsbackendgphoto2.c	2012-09-08 19:22:51.463710301 -0500
@@ -1647,7 +1647,7 @@
       return;
     }
 
-  DEBUG ("  '%s' '%s' '%s'",  info.name, info.path, info.library_filename);
+  /* DEBUG ("  '%s' '%s' '%s'",  info.name, info.path, info.library_filename); */
   
   /* set port */
   rc = gp_camera_set_port_info (gphoto2_backend->camera, info);
@@ -2590,7 +2590,11 @@
         }
     }
 
-  rc = gp_camera_folder_put_file (gphoto2_backend->camera, dir, file_dest, gphoto2_backend->context);
+  #ifdef HAVE_GPHOTO25
+   rc = gp_camera_folder_put_file (gphoto2_backend->camera, dir, new_name, GP_FILE_TYPE_NORMAL, file_dest, gphoto2_backend->context);
+  #else
+   rc = gp_camera_folder_put_file (gphoto2_backend->camera, dir, file_dest, gphoto2_backend->context);
+  #endif
   if (rc != 0)
     goto out;
 
@@ -3222,14 +3226,18 @@
   if (rc != 0)
     goto out;
 
-  gp_file_set_type (file, GP_FILE_TYPE_NORMAL);
   gp_file_set_name (file, write_handle->name);
   gp_file_set_mtime (file, time (NULL));
   gp_file_set_data_and_size (file, 
                              dup_for_gphoto2 (write_handle->data, write_handle->size), 
                              write_handle->size);
   
-  rc = gp_camera_folder_put_file (gphoto2_backend->camera, write_handle->dir, file, gphoto2_backend->context);
+  #ifdef HAVE_GPHOTO25
+   rc = gp_camera_folder_put_file (gphoto2_backend->camera, write_handle->dir, write_handle->name, GP_FILE_TYPE_NORMAL, file, gphoto2_backend->context);
+  #else
+   gp_file_set_type (file, GP_FILE_TYPE_NORMAL);
+   rc = gp_camera_folder_put_file (gphoto2_backend->camera, write_handle->dir, file, gphoto2_backend->context);
+  #endif
   if (rc != 0)
     {
       gp_file_unref (file);
