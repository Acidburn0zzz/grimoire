. "$GRIMOIRE/FUNCTIONS" &&

config_query_option ACCEL_PPP_OPTS "Build version with debug information?" n \
                                   "-DCMAKE_BUILD_TYPE=Debug" \
                                   "-DCMAKE_BUILD_TYPE=Release" &&

if is_version_less $(get_kernel_version) 2.6.37; then
  message "${MESSAGE_COLOR}Kernel version lower than 2.6.37 detected,"
  message "forcing build of non-native pptp module...${DEFAULT_COLOR}" &&
  list_add ACCEL_PPP_OPTS "-DBUILD_DRIVER=TRUE"
else
  config_query_option ACCEL_PPP_OPTS "Build pptp kernel module (replaced by native in new kernels)?" n \
                                     "-DBUILD_DRIVER=TRUE" \
                                     "-DBUILD_DRIVER=FALSE"
fi
