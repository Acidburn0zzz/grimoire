#
# Go through each provider monolithic X spells provided
#
local provider
local spell

for provider in xorg xfree86{,-devel,-libs,-4.3} xdirectfb
do
  for spell in $(gaze depends $provider 1 | cut -d: -f1)
  do
    #
    # Recast each spell still using monolithic X, if it's installed
    # See http://bugs.sourcemage.org/show_bug.cgi?id=14373 for the issue
    # with Sorcery not switching out a no longer available provider
    #
    if spell_ok $spell
    then
      up_trigger $spell cast_self
    fi
  done  # Finished spell loop
done  # Finished provider loop

# modifying this a bit
unset provider spell

local provider
local spell

if spell_ok $SPELL  &&
   [[ $(installed_version $SPELL) == 1.3.0.0 ]] &&
   [[ $(installed_version $SPELL) == 1.2.99.903 ]] &&
   [[ $(installed_version $SPELL) == 1.2.99.902 ]] &&
   [[ $(installed_version $SPELL) == 1.2.0 ]] &&
   [[ $(installed_version $SPELL) == 1.1.99.903 ]] &&
   [[ $(installed_version $SPELL) == 1.1.99.902 ]] &&
   [[ $(installed_version $SPELL) == 1.1.1 ]] &&
   [[ $(installed_version $SPELL) == 1.0.1 ]] &&
   [[ $(installed_version $SPELL) == 1.0.0 ]] &&
   [[ $(installed_version $SPELL) == 0.99.4 ]]
then
  for spell in linuxwacom \
               xf86-input-synaptics \
               synaptics \
               xf86-video-i128 \
               xf86-input-acecad \
               xf86-video-i740 \
               xf86-input-aiptek \
               xf86-video-i810 \
               xf86-input-calcomp \
               xf86-video-impact \
               xf86-input-citron \
               xf86-video-imstt \
               xf86-input-digitaledge \
               xf86-video-intel \
               xf86-input-dmc \
               xf86-video-mga \
               xf86-input-dynapro \
               xf86-video-neomagic \
               xf86-input-elo2300 \
               xf86-video-newport \
               xf86-input-elographics \
               xf86-video-nouveau \
               xf86-input-evdev \
               xf86-video-nsc \
               xf86-input-fpit \
               xf86-video-nv \
               xf86-input-hyperpen \
               xf86-video-openchrome \
               xf86-input-jamstudio \
               xf86-video-radeonhd \
               xf86-input-joystick \
               xf86-video-rendition \
               xf86-input-keyboard \
               xf86-video-s3 \
               xf86-input-magellan \
               xf86-video-s3virge \
               xf86-input-magictouch \
               xf86-video-savage \
               xf86-input-microtouch \
               xf86-video-siliconmotion \
               xf86-input-mouse \
               xf86-video-sisusb \
               xf86-input-mutouch \
               xf86-video-sis \
               xf86-input-palmax \
               xf86-video-sunbw2 \
               xf86-input-penmount \
               xf86-video-suncg14 \
               xf86-input-spaceorb \
               xf86-video-suncg3 \
               xf86-input-summa \
               xf86-video-suncg6 \
               xf86-input-tek4957 \
               xf86-video-sunffb \
               xf86-input-ur98 \
               xf86-video-sunleo \
               xf86-input-vmmouse \
               xf86-video-suntcx \
               xf86-input-void \
               xf86-video-tdfx \
               xf86-video-apm \
               xf86-video-tga \
               xf86-video-ark \
               xf86-video-trident \
               xf86-video-ast \
               xf86-video-tseng \
               xf86-video-ati \
               xf86-video-v4l \
               xf86-video-chips \
               xf86-video-vesa \
               xf86-video-cirrus \
               xf86-video-vga \
               xf86-video-cyrix \
               xf86-video-via \
               xf86-video-dummy \
               xf86-video-vmware \
               xf86-video-fbdev \
               xf86-video-voodoo \
               xf86-video-glint \
               xf86-video-wsfb \
               xf86-video-geode \
               xf86-input-diamondtouch \
               mesalib
do
  if spell_ok $spell
  then
    up_trigger $spell check_self
  fi
done
fi

# this still seems to be a good idea overall
unset provider spell

local provider
local spell

if spell_ok $SPELL  &&
for spell in xkbutils \
             xkbcomp \
             xkbprint \
             xkbevd \
             libxkbui \
             libxkbfile \
             xkeyboard-config \
             setxkbmap
do
  if spell_ok $spell
  then
    up_trigger $spell check_self
  fi
done
fi
