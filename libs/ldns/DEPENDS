. "$GRIMOIRE/FUNCTIONS" &&

depends make &&
depends libtool &&
depends openssl &&

if spell_ok openssl && is_version_less $(installed_version openssl) 1.0; then
  message "${MESSAGE_COLOR}WARNING: GOST support requires OpenSSL 1.0, which is not installed."
  message "Answer 'y' to replace current version $(installed_version openssl) with one from OpenSSL 1.0 branch.${DEFAULT_COLOR}"
fi &&

optional_depends -sub "1.0" openssl \
                            "--enable-gost" \
                            "--disable-gost" \
                            "for GOST support" &&

optional_depends -sub PYTHON swig \
                             "--with-pyldns" \
                             "--without-pyldns" \
                             "to generate Python library" &&

if is_depends_enabled $SPELL swig; then
  config_query_option LDNS_OPTS "Install ldnsx Python module?" y \
                                "--with-pyldnsx" \
                                "--without-pyldnsx"
fi &&

optional_depends perl \
                 "--with-p5-dns-ldns" \
                 "--without-p5-dns-ldns" \
                 "to generate DNS::LDNS Perl bindings"
