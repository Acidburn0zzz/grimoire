default_pre_build      &&
cd  "$SOURCE_DIRECTORY"  &&
unpack_file  3  &&

patch -p0 < $SPELL_DIRECTORY/patches/bash40-001 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-002 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-003 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-004 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-005 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-006 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-007 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-008 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-009 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-010 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-011 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-012 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-013 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-014 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-015 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-016 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-017 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-018 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-019 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-020 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-021 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-022 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-023 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-024 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-025 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-026 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-027 &&
patch -p0 < $SPELL_DIRECTORY/patches/bash40-028 &&

if [[ "$BASH_NI_LOGIN" == y ]]; then
  message "${MESSAGE_COLOR}Defining NON_INTERACTIVE_LOGIN_SHELLS.$DEFAULT_COLOR" &&
  sed -i 's/\/\* \(#define NON_INTERACTIVE_LOGIN_SHELLS\) \*\//\1/' config-top.h 
fi &&
if grep "# Generated by GNU Autoconf 2.59" configure > /dev/null; then
  patch -Np1 < "$SPELL_DIRECTORY/bash_autoconf.patch"
fi
