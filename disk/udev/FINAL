# ensure that all groups used in 50-default.rules exist
create_group disk
create_group cdrom
create_group floppy
create_group burning
create_group video
create_group audio
create_group uucp
create_group dialout
create_group firewire
create_group tape

# dispel hotplug
if [[ $UDEV_DISPEL_HOTPLUG == y ]]; then
  # we don't care if these fail
  dispel hotplug
  persistent_remove UDEV_DISPEL_HOTPLUG
fi &&

# warn of coming changes
message "\n${PROBLEM_COLOR}About persistent net interfaces naming:"  \
        "$DEFAULT_COLOR$MESSAGE_COLOR"                               \
        "\nThe spell now uses udev rules generator. Next time you"   \
        "boot, udev will\ngenerate a rules file called"              \
        "/etc/udev/rules.d/70-persistent-net.rules\nfor all the"     \
        "interfaces it has detected. Then you can modify the name"   \
        "of\nthe interface by changing the NAME key. Udev will"      \
        "not erase it.\nThe old configuration stuff with the"        \
        "DEVICE_MAC field in netconf is now\nobsolete.$DEFAULT_COLOR"
# udev-174 changes
message "\n${PROBLEM_COLOR}Udev-174 changes:"                        \
        "$DEFAULT_COLOR$MESSAGE_COLOR"                               \
        "The udev daemon moved to /lib/udev/udevd"
# udev-177 changes
message "\n${PROBLEM_COLOR}Udev-177 changes:"                        \
        "$DEFAULT_COLOR$MESSAGE_COLOR"                               \
        "'udevadm control --reload-rules' option has been renamed to '--reload'" \
# udev-178 changes
message "\n${PROBLEM_COLOR}Udev-178 changes:"                        \
        "$DEFAULT_COLOR$MESSAGE_COLOR"                               \
        "\nThe RUN+="socket:.." option is deprecated" \
        "\nServices which listen to udev events,need to subscribe to the netlink" \
        "messages with libudev and not let udev block" \
        "in the rules execution until the message is delivered "
# final warning
message "\n${PROBLEM_COLOR}Check any local scripts and udev rules !!!" \
        "$DEFAULT_COLOR$MESSAGE_COLOR Read the NEWS file"
