--- lxdm-0.3.0.orig/src/lxdm.c	2010-09-24 17:43:49.000000000 +0200
+++ lxdm-0.3.0/src/lxdm.c	2010-11-27 08:51:27.000000000 +0100
@@ -150,6 +150,7 @@
     while( waitpid(-1, 0, WNOHANG) > 0 ) ;
 }
 
+#if HAVE_LIBPAM
 static void close_pam_session(pam_handle_t *pamh)
 {
     int err;
@@ -159,6 +160,7 @@
     pam_end(pamh, err);
     pamh = NULL;
 }
+#endif
 
 static LXSession *lxsession_find_greeter(void)
 {
